(this.webpackJsonpxo=this.webpackJsonpxo||[]).push([[0],{121:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(15),i=n.n(a),s=n(46),o=n(19),l=(n(121),n(11)),u=n.p+"static/media/logo.5a7511e7.svg",j=n(193),d=n(194),b=n(175),m=n(179),O=n(195),h=n(72),x=n.n(h),f=n(92),p=n.n(f),v=n(73),g=n.n(v),y=n(93),N=n.n(y),w=n(91),k=n.n(w),U=n(53),C=n(57);C.a.initializeApp({apiKey:"AIzaSyASxXnbaJUXVhul4jHBW8m-Xq_k9KOx7mM",authDomain:"xo-game-f3a16.firebaseapp.com",databaseURL:"https://xo-game-f3a16-default-rtdb.europe-west1.firebasedatabase.app",projectId:"xo-game-f3a16",storageBucket:"xo-game-f3a16.appspot.com",messagingSenderId:"845770346317",appId:"1:845770346317:web:211d6ddd42f8055e3ff104"});var S=C.a.firestore(),A=C.a.auth(),R=n(178),I=n(180),T=n(90),L=n.n(T),E=n(3),X=function(e){var t=e.user,n=e.setIsDrawerOpen,c=Object(o.f)(),a=Object(r.useState)([]),i=Object(l.a)(a,2),s=i[0],u=i[1],h=S.collection("rooms/"),x=Object(r.useState)(null),f=Object(l.a)(x,2),p=f[0],v=f[1],g=Boolean(p),y=function(){v(null)},N=Object(r.useState)([]),w=Object(l.a)(N,2),k=w[0],U=w[1];Object(r.useEffect)((function(){var e=[];s&&s.forEach((function(n){n.game.turnUser.uid===t.uid&&n.game.player2&&e.push(n)})),U(e)}),[s]),Object(r.useEffect)((function(){h.orderBy("createdAt").onSnapshot((function(e){u(C(e.docs).reverse())}))}),[]);var C=function(e){var t=[];return e.forEach((function(e){var n=e.data();n.id=e.id,t.push(n)})),t};if(s&&t)return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(b.a,{"aria-controls":"fade-menu","aria-haspopup":"true",onClick:function(e){t&&v(e.currentTarget)},children:Object(E.jsx)(R.a,{badgeContent:k.length,color:"primary",children:Object(E.jsx)(L.a,{})})}),Object(E.jsxs)(j.a,{id:"fade-menu",anchorEl:p,keepMounted:!1,open:g,onClose:y,TransitionComponent:m.a,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[k.length?"":"No New Notifications",k.length?"It's Your Turn Against":"",!!k&&k.map((function(e){var r=e.game,a=r.player2,i=r.player1,s=a&&a.uid===t.uid?i:a;return Object(E.jsxs)("div",{children:[Object(E.jsx)(I.a,{variant:"middle"}),Object(E.jsxs)(d.a,{onClick:y,className:"menu-item",children:[Object(E.jsx)(O.a,{src:s.photoURL,alt:s.photoURL}),Object(E.jsx)(b.a,{onClick:function(){n(!1),c.push("/multiplayer/".concat(e.id)),c.go()},children:s.displayName})]})]},e.id)}))]})]})},P=function(){var e=Object(o.f)(),t=Object(r.useState)(!1),n=Object(l.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(!1),s=Object(l.a)(i,2),h=s[0],f=s[1],v=Object(U.a)(A),y=Object(l.a)(v,1)[0],w=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Boolean(n);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(b.a,{"aria-controls":"fade-menu","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)},children:Object(E.jsx)(O.a,{src:y.photoURL,alt:""})}),Object(E.jsx)(j.a,{id:"fade-menu",anchorEl:n,keepMounted:!0,open:i,onClose:function(){c(null)},TransitionComponent:m.a,children:Object(E.jsx)(d.a,{onClick:function(){A.signOut(),a(!1)},children:"Logout"})})]})};return Object(E.jsx)("div",{className:"nav-bar-wrap full",children:Object(E.jsxs)("div",{className:"nav-bar flex align-center",children:[(c||h)&&Object(E.jsx)("div",{className:"screen",onClick:function(){a(!1),f(!1)}}),Object(E.jsxs)(b.a,{onClick:function(){e.push("/")},className:"logo",children:[Object(E.jsx)("img",{src:u,alt:""}),Object(E.jsx)("h2",{children:"Tic Tac Toe"})]}),Object(E.jsxs)("ul",{className:"main-nav clean-list flex align-center justify-center ".concat(c?"menu-open":""),children:[Object(E.jsx)("li",{className:"home",children:Object(E.jsxs)(b.a,{onClick:function(){a(!1),e.push("/")},children:[Object(E.jsx)(k.a,{}),"Home"]})}),Object(E.jsx)("li",{className:"ai",children:Object(E.jsxs)(b.a,{onClick:function(){a(!1),e.push("/ai")},children:[Object(E.jsx)(x.a,{}),"Ai Game"]})}),Object(E.jsx)("li",{className:"rooms",children:Object(E.jsxs)(b.a,{onClick:function(){a(!1),e.push("/rooms")},children:[Object(E.jsx)(g.a,{}),"Game Rooms"]})}),Object(E.jsx)("li",{className:"about",children:Object(E.jsxs)(b.a,{onClick:function(){a(!1),e.push("/about")},children:[Object(E.jsx)(p.a,{}),"About"]})}),Object(E.jsx)("li",{className:"user",children:y?Object(E.jsx)(w,{}):Object(E.jsxs)(b.a,{children:[Object(E.jsx)(N.a,{}),"Sign In"]})}),Object(E.jsx)("li",{className:"notifications",children:y&&Object(E.jsx)(X,{user:y,setIsDrawerOpen:a})})]}),Object(E.jsxs)("div",{className:"nav-icon ".concat(c?"open":""),onClick:function(){return a(!c)},children:[Object(E.jsx)("span",{}),Object(E.jsx)("span",{}),Object(E.jsx)("span",{}),Object(E.jsx)("span",{})]})]})})},D=n(94),F=n.n(D),z=n(96),M=n.n(z),q=n(95),W=n.n(q),J=function(){return Object(E.jsxs)("div",{className:"footer flex align-center justify-center full",children:[Object(E.jsx)(F.a,{}),Object(E.jsx)("p",{children:"2021 Designed and developed by Michael Michaeli"}),Object(E.jsx)("a",{href:"https://github.com/michaelmichaeli/",target:"_blank",rel:"noreferrer",children:Object(E.jsx)(W.a,{})}),Object(E.jsx)("a",{href:"https://www.linkedin.com/in/michael-michaeli-a620b9b0/",target:"_blank",rel:"noreferrer",children:Object(E.jsx)(M.a,{})})]})},B=function(){return Object(E.jsx)("div",{className:"home-page flex column align-center justify-center",children:Object(E.jsxs)("main",{className:"flex column align-center justify-center",children:[Object(E.jsx)("h2",{children:"Welcome To"}),Object(E.jsx)("h1",{children:"Tic Tac Toe"}),Object(E.jsx)("p",{children:"Play Against Ai or with Friends In Realtime Multiplayer rooms"}),Object(E.jsxs)("section",{className:"menu flex column",children:[Object(E.jsxs)("a",{href:"#/ai",children:[Object(E.jsx)(x.a,{})," Play Against Ai"]}),Object(E.jsxs)("a",{href:"#/rooms",children:[Object(E.jsx)(g.a,{})," Play With Friends"]})]})]})})},Y=n(43);function V(e){if(e&&!e.every((function(e){return e.every((function(e){return!e}))})))return e[0][0]&&e[0][0]===e[0][1]&&e[0][0]===e[0][2]?e[0][0]:e[1][0]&&e[1][0]===e[1][1]&&e[1][0]===e[1][2]?e[1][0]:e[2][0]&&e[2][0]===e[2][1]&&e[2][0]===e[2][2]?e[2][0]:e[0][0]&&e[0][0]===e[1][0]&&e[0][0]===e[2][0]?e[0][0]:e[0][1]&&e[0][1]===e[1][1]&&e[0][1]===e[2][1]?e[0][1]:e[0][2]&&e[0][2]===e[1][2]&&e[0][2]===e[2][2]?e[0][2]:e[0][0]&&e[0][0]===e[1][1]&&e[0][0]===e[2][2]?e[0][0]:e[0][2]&&e[0][2]===e[1][1]&&e[0][2]===e[2][0]?e[0][2]:e.every((function(e){return e.every((function(e){return!!e}))}))?"Tie":null}var _={X:-1,O:1,Tie:0};function G(e,t){var n=V(e);if(null!==n)return _[n];if(t){for(var r=-1/0,c=0;c<3;c++)for(var a=0;a<3;a++)if(null===e[c][a]){e[c][a]="O";var i=G(e,!1);e[c][a]=null,r=Math.max(i,r)}return r}for(var s=1/0,o=0;o<3;o++)for(var l=0;l<3;l++)if(null===e[o][l]){e[o][l]="X";var u=G(e,!0);e[o][l]=null,s=Math.min(u,s)}return s}var H=n(33),K=n.n(H),Q=n(50),Z=n.p+"static/media/x.507a0b3a.svg",$=n.p+"static/media/o.31f7f953.svg",ee=function(e){var t=e.index,n=e.value,r=e.handleClick,c=e.winner,a=e.isUserTurn;return Object(E.jsxs)("button",{className:"square ".concat(t.i,"-").concat(t.j," ").concat(c?"win":""),onClick:function(){return r(t)},disabled:!!n||!a,children:["X"===n&&Object(E.jsx)("img",{src:Z,alt:"X"}),"O"===n&&Object(E.jsx)("img",{src:$,alt:"O"})]})},te=n(181),ne=function(e){var t=e.squares,n=e.handleClick,c=e.winner,a=e.isUserTurn,i=e.winnerUser,s=void 0===i?null:i,o=e.isAiThinking,u=void 0===o?null:o,j=Object(r.useState)(null),d=Object(l.a)(j,2),b=d[0],m=d[1];Object(r.useEffect)((function(){(function(){var e=Object(Q.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=s,!e.t0){e.next=7;break}return e.t1=m,e.next=5,s();case 5:e.t2=e.sent,(0,e.t1)(e.t2);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]);var O=function(){return Object(E.jsxs)("div",{className:"declaration",children:["Tie"===c&&Object(E.jsx)("h1",{className:"winner",children:"It's a Tie!"}),("X"===c||"O"===c)&&Object(E.jsxs)("div",{className:"winner",children:[Object(E.jsx)("img",{src:"X"===c?Z:$,alt:"X"===c?"X":"O"}),!b&&Object(E.jsx)("h3",{children:"Won!"}),b&&Object(E.jsxs)("h3",{children:[b.displayName," Won!"]})]})]})},h=function(){return Object(E.jsx)("div",{className:"your-turn",children:Object(E.jsx)("h1",{children:"Your Turn"})})};return Object(E.jsxs)("div",{className:"board-wrapper",children:[Object(E.jsx)("div",{className:"board ".concat(c&&"win"),children:t.map((function(e,t){return e.map((function(e,r){return Object(E.jsx)(ee,{index:{i:t,j:r},value:e,handleClick:n,winner:c,isUserTurn:a},"".concat(t,"-").concat(r))}))}))}),Object(E.jsx)(O,{}),a&&!c&&Object(E.jsx)(h,{}),u&&Object(E.jsx)("div",{className:"loading",children:Object(E.jsx)(te.a,{size:"200px",color:"inherit"})})]})},re=function(){var e=Object(r.useState)(Array.from(Array(3),(function(){return new Array(3).fill(null)}))),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(l.a)(a,2),s=i[0],o=i[1],u=V(n),j=function(e){var t=function(e){for(var t,n=-1/0,r=0;r<3;r++)for(var c=0;c<3;c++)if(null===e[r][c]){e[r][c]="O";var a=G(e,!1);e[r][c]=null,a>n&&(n=a,t={i:r,j:c})}return t}(e);e[t.i][t.j]="O",c(e)};return Object(E.jsxs)("div",{className:"ai flex align-center justify-center",children:[Object(E.jsx)(ne,{winner:u,squares:n,handleClick:function(e){var t=e.i,r=e.j;if(!(u||n[t][r]||s)){var a=Object(Y.a)(n);a[t][r]="X",c(a),V(n)||(o(!0),setTimeout((function(){j(n),o(!1)}),1e3))}},isUserTurn:!s,isAiThinking:s}),Object(E.jsx)("button",{className:"restart  ".concat(u&&"won"),onClick:function(){c(Array.from(Array(3),(function(){return new Array(3).fill(null)}))),u=null},children:Object(E.jsx)("p",{children:"Restart"})})]})},ce=n(63),ae=n(97),ie=n(74),se=n.n(ie),oe=function(e){var t=e.txt,n=e.createdAt,r=e.isSent,c=e.photoURL,a=r?"sent":"received";return Object(E.jsxs)("div",{className:"wrap flex align-center "+a,children:[!r&&Object(E.jsx)("img",{src:c,alt:"avatar"}),Object(E.jsx)("div",{className:"message flex between align-center "+a,children:Object(E.jsx)("p",{children:t})}),Object(E.jsx)("span",{children:se()(n).fromNow()})]})},le=n(99),ue=n.n(le),je=n(98),de=n.n(je),be=n(182),me=function(e){var t=e.roomId,n=e.user,c=e.messages,a=Object(r.useState)(""),i=Object(l.a)(a,2),s=i[0],o=i[1],u=Object(r.useState)(!1),j=Object(l.a)(u,2),d=j[0],b=j[1],m=Object(r.useRef)(),O=S.collection("rooms").doc(t);Object(r.useEffect)((function(){m.current&&m.current.scrollIntoView({behavior:"smooth"})}),[c]);var h=function(){var e=Object(Q.a)(K.a.mark((function e(t){var r,c,a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,O.get();case 5:return r=e.sent.data(),c=Object(ce.a)({},r),a={id:Object(ae.makeId)(),txt:s,createdAt:Date.now(),photoURL:n.photoURL,userId:n.uid},c.messages.push(a),e.next=11,O.update(c);case 11:o(""),m.current.scrollIntoView({behavior:"smooth"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:"chat flex column",children:[Object(E.jsxs)("div",{className:"header",onClick:function(){b(!d),m.current&&m.current.scrollIntoView({behavior:"smooth"})},children:[Object(E.jsx)(de.a,{}),Object(E.jsx)("p",{children:" Room Chat "}),Object(E.jsx)("svg",{className:"arrow ".concat(!d&&"upsidedown"),width:"10px",height:"10px",viewBox:"0 0 18 10",children:Object(E.jsx)("path",{fill:"black",d:"M1 2.414A1 1 0 012.414 1L8.293 6.88a1 1 0 001.414 0L15.586 1A1 1 0 0117 2.414L9.707 9.707a1 1 0 01-1.414 0L1 2.414z"})})]}),Object(E.jsx)(be.a,{direction:"up",in:d,mountOnEnter:!0,unmountOnExit:!0,children:Object(E.jsxs)("main",{children:[(!c||!c.length)&&Object(E.jsxs)("div",{className:"no-messages",children:[Object(E.jsx)("p",{children:"No Messages Yet"}),Object(E.jsx)("p",{children:"Let The Trash-Talk Begin"})]}),c&&c.map((function(e){return Object(E.jsx)(oe,{txt:e.txt,createdAt:e.createdAt,photoURL:e.photoURL,isSent:n.uid===e.userId},e.id)})),Object(E.jsx)("div",{ref:m})]})}),Object(E.jsx)(be.a,{direction:"up",in:d,mountOnEnter:!0,unmountOnExit:!0,children:Object(E.jsxs)("form",{onSubmit:h,children:[Object(E.jsx)("input",{placeholder:"Aa",value:s,onChange:function(e){return o(e.target.value)}}),Object(E.jsx)("button",{disabled:!s,type:"submit",children:Object(E.jsx)(ue.a,{})})]})})]})}):null},Oe=n(7),he=n(100),xe=n.n(he),fe=function(){var e={signInFlow:"popup",signInOptions:[Oe.a.auth.GoogleAuthProvider.PROVIDER_ID,Oe.a.auth.FacebookAuthProvider.PROVIDER_ID,Oe.a.auth.GithubAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}};return Object(E.jsxs)("div",{className:"login flex column align-center justify-center",children:[Object(E.jsx)("h2",{children:"Please Sign-In"}),Object(E.jsx)(xe.a,{uiConfig:e,firebaseAuth:Oe.a.auth()})]})},pe=function(e){var t=e.currentPlayer,n=e.currentSymbol,r=e.winner;return Object(E.jsxs)("div",{className:"current-player-preview flex between ".concat(r&&"won"),children:[Object(E.jsx)("div",{className:"symbol",children:Object(E.jsx)("img",{src:"X"===n?Z:$,alt:"X"===n?"X":"O"})}),Object(E.jsxs)("div",{className:"next-player",children:[Object(E.jsx)("p",{className:"next-player",children:"Next Player:"}),Object(E.jsx)("p",{className:"display-name",children:null===t||void 0===t?void 0:t.displayName})]})]})},ve=n(102),ge=n.n(ve),ye=n(183),Ne=n(184),we=n(185),ke=n(186),Ue=n(187),Ce=n(188),Se=n(189),Ae=n(190),Re=n(191),Ie=n(192),Te=function(e){var t=e.roomId,n="http://localhost:3000/multiplayer/".concat(t),r="Join my game of Tic Tac Toe";return Object(E.jsxs)("div",{className:"share flex column align-center",children:[Object(E.jsxs)("div",{className:"title flex align-center",children:[Object(E.jsx)(ge.a,{}),Object(E.jsx)("p",{children:"Invite Your Friends"})]}),Object(E.jsxs)("div",{className:"content  flex align-center wrap",children:[Object(E.jsx)(ye.a,{url:n,quote:r,className:"share-button",children:Object(E.jsx)(Ne.a,{size:"2rem",round:!0})}),Object(E.jsx)(we.a,{url:n,title:r,className:"share-button",children:Object(E.jsx)(ke.a,{size:"2rem",round:!0})}),Object(E.jsx)(Ue.a,{url:n,title:r,separator:": ",className:"share-button",children:Object(E.jsx)(Ce.a,{size:"2rem",round:!0})}),Object(E.jsx)(Se.a,{url:n,title:r,windowWidth:750,windowHeight:600,className:"share-button",children:Object(E.jsx)(Ae.a,{size:"2rem",round:!0})}),Object(E.jsx)(Re.a,{url:n,subject:r,body:"Check out this cool game: ",className:"share-button",children:Object(E.jsx)(Ie.a,{size:"2rem",round:!0})})]})]})},Le=n(105),Ee=n.n(Le),Xe=n(104),Pe=n.n(Xe),De=function(){var e=Object(o.g)().roomId,t=Object(r.useState)(!0),n=Object(l.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(!0),s=Object(l.a)(i,2),u=s[0],j=s[1],d=Object(U.a)(A),b=Object(l.a)(d,1)[0];A.onAuthStateChanged((function(e){return j(!1)}));var m=Object(r.useState)(null),O=Object(l.a)(m,2),h=O[0],x=O[1],f=Object(r.useState)(!1),p=Object(l.a)(f,2),v=p[0],g=p[1],y=Object(r.useState)(!0),N=Object(l.a)(y,2),w=N[0],k=N[1],C=S.collection("rooms").doc(e);Object(r.useEffect)((function(){C.onSnapshot((function(e){x(e.data()),a(!1)}))}),[]),Object(r.useEffect)((function(){return b&&h&&"hidden"!==document.visibilityState&&I(),document.addEventListener("visibilitychange",(function(){b&&h&&("hidden"===document.visibilityState?R():I())})),function(){document.removeEventListener("visibilitychange",R),document.removeEventListener("visibilitychange",I)}}),[h,b]),Object(r.useEffect)((function(){if(h&&h.onlineUsers.length){var e=h.game,t=e.player1,n=e.player2,r=e.turnUser;g(t.uid===r.uid&&-1===h.onlineUsers.findIndex((function(e){return e.uid===t.uid}))),n&&k(n.uid===r.uid&&-1===h.onlineUsers.findIndex((function(e){return e.uid===n.uid})))}}),[h]);var R=function(){var e=Object(Q.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.get();case 2:return(t=e.sent.data()).onlineUsers=t.onlineUsers.filter((function(e){return e.uid!==b.uid})),e.next=6,C.update(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(Q.a)(K.a.mark((function e(){var t,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.get();case 2:if(t=e.sent.data()){e.next=5;break}return e.abrupt("return");case 5:return n={uid:b.uid,displayName:b.displayName,photoURL:b.photoURL},b.uid!==t.game.player1.uid&&(t.game.player2||(t.game.player2=n)),t.onlineUsers.findIndex((function(e){return e.uid===b.uid}))<0&&t.onlineUsers.push(n),e.next=10,C.update(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e){if(e&&!e.every((function(e){return e.every((function(e){return!e}))})))return e[0][0]&&e[0][0]===e[0][1]&&e[0][0]===e[0][2]?e[0][0]:e[1][0]&&e[1][0]===e[1][1]&&e[1][0]===e[1][2]?e[1][0]:e[2][0]&&e[2][0]===e[2][1]&&e[2][0]===e[2][2]?e[2][0]:e[0][0]&&e[0][0]===e[1][0]&&e[0][0]===e[2][0]?e[0][0]:e[0][1]&&e[0][1]===e[1][1]&&e[0][1]===e[2][1]?e[0][1]:e[0][2]&&e[0][2]===e[1][2]&&e[0][2]===e[2][2]?e[0][2]:e[0][0]&&e[0][0]===e[1][1]&&e[0][0]===e[2][2]?e[0][0]:e[0][2]&&e[0][2]===e[1][1]&&e[0][2]===e[2][0]?e[0][2]:e.every((function(e){return e.every((function(e){return!!e}))}))?"Tie":null},L=function(){var e=h.game,t=e.player1,n=e.player2;return v&&!w?Object(E.jsxs)("section",{className:"waiting flex column align-center",children:[Object(E.jsx)(te.a,{color:"inherit"}),Object(E.jsxs)("p",{children:["Waiting for Player 1 (",t.displayName,") to come back"]})]}):w&&!v?Object(E.jsxs)("section",{className:"waiting flex column align-center",children:[Object(E.jsx)(te.a,{color:"inherit"}),Object(E.jsxs)("p",{children:["Waiting for Player 2 ",n?"(".concat(n.displayName,") to come back"):" to join the room"]})]}):void 0};if(c||u)return Object(E.jsx)("div",{className:"loader-spinner flex column align-center justify-center",children:Object(E.jsx)(te.a,{size:"100px",color:"inherit"})});if(!h&&!c)return Object(E.jsx)("div",{className:"multiplayer flex column align-center justify-center",children:Object(E.jsxs)("div",{className:"no-room flex column align-center justify-center",children:[Object(E.jsx)("h2",{children:"Oops... Something went wrong"}),Object(E.jsx)("p",{children:"Probably an address typo or this room doesn't exist anymore."}),Object(E.jsxs)("p",{children:["You can create a new game room from the",Object(E.jsx)("a",{href:"#/rooms",children:"Rooms-page."})]})]})});if(!b&&!u)return Object(E.jsx)(fe,{});if(h&&b&&!c&&!u){var X=h.game,P=X.squares,D=X.turnUser,F=X.winner,z=X.player1,M=X.player2,q=h.messages,W=h.creator,J=h.onlineUsers;return Object(E.jsxs)("div",{className:"multiplayer flex column align-center",children:[Object(E.jsxs)("header",{className:"flex between align-center",children:[D&&Object(E.jsx)(pe,{currentPlayer:D,currentSymbol:D.uid===W.uid?"X":"O",winner:F}),Object(E.jsx)("div",{className:"middle flex column align-center justify-center",children:Object(E.jsxs)("h2",{children:[W.displayName,"'s Room"]})}),b.uid===z.uid||M&&b.uid===M.uid?Object(E.jsxs)("div",{className:"restart flex  ".concat(F&&"won"),onClick:function(){return function(){if(h.game.winner&&(b.uid===h.game.player1.uid||b.uid===h.game.player2.uid)){var e=Object(ce.a)({},h);e.game.winner=null,e.game.squares=JSON.stringify([["","",""],["","",""],["","",""]]),C.update(e)}}()},children:[Object(E.jsx)("div",{className:"text",children:Object(E.jsx)("p",{children:"Restart"})}),Object(E.jsx)("div",{className:"symbol",children:Object(E.jsx)(Pe.a,{})})]}):Object(E.jsx)("div",{className:"restart-dummy"})]}),Object(E.jsx)(ne,{squares:JSON.parse(P),handleClick:function(e){var t=e.i,n=e.j,r=h.game,c=r.squares,a=r.turnUser,i=r.winner,s=r.player1,o=r.player2,l=h.creator;if(!i&&""!==c[t][n]&&a.uid===b.uid&&o){var u=Object(Y.a)(JSON.parse(c));u[t][n]=b.uid===l.uid?"X":"O";var j=a.uid===h.game.player1.uid?o:s,d=Object(ce.a)({},h);d.game.winner=T(u),u=JSON.stringify(u),d.game.squares=u,d.game.turnUser=j,C.update(d)}},winner:F,isUserTurn:(null===D||void 0===D?void 0:D.uid)===b.uid,winnerUser:function(){var e=h.game,t=e.winner,n=e.player1,r=e.player2;return t&&"Tie"!==t?"X"===t?n:r:null}}),(v||w)&&Object(E.jsx)(L,{}),Object(E.jsxs)("section",{className:"online-players flex column align-center",children:[Object(E.jsxs)("div",{className:"title flex align-center",children:[Object(E.jsx)(Ee.a,{}),Object(E.jsx)("p",{children:"Online Right Now"})]}),Object(E.jsx)("div",{className:"content flex align-center wrap",children:J.map((function(e){return Object(E.jsxs)("div",{className:"player flex justify-center align-center",children:[Object(E.jsx)("img",{src:e.photoURL,alt:e.photoURL}),Object(E.jsx)("p",{children:e.displayName[0]})]},e.uid)}))})]}),Object(E.jsx)(Te,{roomId:e}),Object(E.jsx)(me,{messages:q,roomId:e,user:b})]})}},Fe=function(){return Object(E.jsx)("div",{className:"about flex align-center justify-center",children:"I Am About"})},ze=n(81),Me=n.n(ze),qe=n(106),We=n.n(qe),Je=n(107),Be=n.n(Je),Ye=n(108),Ve=n.n(Ye),_e=function(e){var t=e.localRooms,n=(e.goToRoom,e.user),c=e.onDeleteRoom,a=Object(r.useState)(t),i=Object(l.a)(a,2),s=i[0],o=i[1];Object(r.useEffect)((function(){o(t)}),[t]);var u=Object(r.useState)(null),j=Object(l.a)(u,2),d=j[0],m=j[1],O=function(e){var t=e.room,n=e.user,r=t.game,c=r.player1,a=r.player2,i=r.turnUser,s=i.uid===c.uid?"Your Turn":"Opponents turn";if(c.uid===n.uid)return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Me.a,{}),Object(E.jsx)("p",{children:s})]});if(!a)return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(We.a,{}),Object(E.jsx)("p",{children:"Join"})]});var o=i.uid===a.uid?"Your Turn":"Opponents turn";return a.uid===n.uid?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Me.a,{}),Object(E.jsx)("p",{children:o})]}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Be.a,{}),Object(E.jsx)("p",{children:"Watch"})]})},h=function(){return Object(E.jsxs)("div",{className:"delete-modal",children:[Object(E.jsx)("p",{children:"Are your sure you want to remove this room permanently?"}),Object(E.jsx)(b.a,{onClick:function(){console.log(d),c(d),m(null)},children:"Remove"}),Object(E.jsx)(b.a,{onClick:function(){return m(null)},children:"No"})]})};return Object(E.jsxs)(E.Fragment,{children:[d&&Object(E.jsx)("div",{className:"screen",onClick:function(){return m(null)}}),Object(E.jsxs)("section",{className:"rooms-list",children:[Object(E.jsxs)("header",{children:[Object(E.jsx)("div",{className:"creator",onClick:function(){return function(){var e=Object(Y.a)(s);e.sort((function(e,t){var n=e.creator.displayName.toUpperCase(),r=t.creator.displayName.toUpperCase();return n<r?-1:n>r?1:0})),e.every((function(e,t){return e.id===s[t].id}))&&e.reverse(),o(e)}()},children:"Player"}),Object(E.jsx)("div",{className:"player2",onClick:function(){return function(){var e=Object(Y.a)(s);e.sort((function(e,t){var n,r,c=null===(n=e.game.player2)||void 0===n?void 0:n.displayName.toUpperCase(),a=null===(r=t.game.player2)||void 0===r?void 0:r.displayName.toUpperCase();return c&&a?c<a?-1:c>a?1:0:-2})),e.every((function(e,t){return e.id===s[t].id}))&&e.reverse(),o(e)}()},children:"Opponent"}),Object(E.jsx)("div",{className:"time",onClick:function(){return function(){var e=Object(Y.a)(s);e.sort((function(e,t){return e.createdAt.seconds-t.createdAt.seconds})),e.every((function(e,t){return e.id===s[t].id}))&&e.reverse(),o(e)}()},children:"Created"}),Object(E.jsx)("div",{children:"Enter"})]}),Object(E.jsx)("main",{children:s.map((function(e){return Object(E.jsxs)("div",{className:"room-row",children:[Object(E.jsxs)("div",{className:"creator flex align-center",children:[Object(E.jsx)("img",{src:e.creator.photoURL,alt:e.creator.photoURL}),e.creator.uid===n.uid?"You":e.creator.displayName]}),Object(E.jsxs)("div",{className:"player2 flex align-center",children:[e.game.player2&&Object(E.jsx)("img",{src:e.game.player2.photoURL,alt:e.game.player2.photoURL}),e.game.player2&&e.game.player2.uid===n.uid&&"You",e.game.player2&&e.game.player2.uid!==n.uid&&e.game.player2.displayName,!e.game.player2&&"Waiting..."]}),e.createdAt&&Object(E.jsx)("div",{className:"time flex justify-center align-center",children:se()(1e3*e.createdAt.seconds).fromNow()}),n.uid===e.creator.uid?Object(E.jsx)("button",{className:"trash flex justify-center align-center",onClick:function(){return m(e.id)},children:Object(E.jsx)(Ve.a,{})}):Object(E.jsx)("div",{className:"trash",children:" "}),Object(E.jsx)("a",{href:"#/multiplayer/".concat(e.id),className:"join flex align-center justify-center",children:Object(E.jsx)(O,{room:e,user:n})})]},e.id)}))}),d&&Object(E.jsx)(h,{})]})]})},Ge=n(109),He=n.n(Ge),Ke=function(){var e=Object(o.f)(),t=Object(r.useState)(!0),n=Object(l.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(!0),s=Object(l.a)(i,2),u=s[0],j=s[1],d=Object(U.a)(A),b=Object(l.a)(d,1)[0];A.onAuthStateChanged((function(e){return j(!1)}));var m=Object(r.useState)([]),O=Object(l.a)(m,2),h=O[0],x=O[1],f=S.collection("rooms/");Object(r.useEffect)((function(){f.orderBy("createdAt").onSnapshot((function(e){x(p(e.docs).reverse()),a(!1)}))}),[]);var p=function(e){var t=[];return e.forEach((function(e){var n=e.data();n.id=e.id,t.push(n)})),t},v=function(t){e.push("/multiplayer/".concat(t))};return u?Object(E.jsx)("div",{className:"loader-spinner flex column align-center justify-center",children:Object(E.jsx)(te.a,{size:"100px",color:"inherit"})}):b||u?Object(E.jsxs)("section",{className:"rooms-container home-page flex column align-center justify-center",children:[Object(E.jsx)("img",{className:"user-photo",src:b.photoURL,alt:b.photoURL}),Object(E.jsx)("h2",{className:"user-name",children:b.displayName}),Object(E.jsxs)("div",{className:"rooms flex column justify-center align-center between",children:[!c&&h.length>0&&Object(E.jsx)(_e,{user:b,goToRoom:v,localRooms:h,onDeleteRoom:function(e){console.log(e),f.doc(e).delete()}}),!c&&(!h||0===h.length)&&Object(E.jsxs)("div",{className:"no-rooms",children:[Object(E.jsx)("p",{children:"Looks like all the game rooms expired."}),Object(E.jsx)("p",{children:"Create a new room and invite your friends."})]}),c&&Object(E.jsx)("div",{className:"loader-spinner flex column align-center justify-center",children:Object(E.jsx)(te.a,{color:"inherit"})}),Object(E.jsxs)("button",{onClick:function(){var e={uid:b.uid,displayName:b.displayName,photoURL:b.photoURL},t={creator:e,createdAt:C.a.firestore.FieldValue.serverTimestamp(),game:{turnUser:e,player1:e,player2:null,squares:JSON.stringify([["","",""],["","",""],["","",""]]),winner:null},messages:[],onlineUsers:[]};f.add(t).then((function(e){return v(e.id)}))},children:[Object(E.jsx)(He.a,{}),"Create New Room"]})]})]}):Object(E.jsx)(fe,{})};var Qe=function(){return Object(E.jsxs)("div",{className:"App main-container",children:[Object(E.jsx)(P,{}),Object(E.jsxs)(o.c,{children:[Object(E.jsx)(o.a,{component:B,exact:!0,path:"/"}),Object(E.jsx)(o.a,{component:Fe,exact:!0,path:"/about"}),Object(E.jsx)(o.a,{component:re,exact:!0,path:"/ai"}),Object(E.jsx)(o.a,{component:Ke,exact:!0,path:"/rooms"}),Object(E.jsx)(o.a,{component:De,exact:!0,path:"/multiplayer/:roomId?"})]}),Object(E.jsx)(J,{})]})},Ze=n(29),$e=Object(Ze.a)();i.a.render(Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(s.a,{basename:"/xo/",history:$e,children:Object(E.jsx)(Qe,{})})}),document.getElementById("root"))},97:function(e,t){e.exports={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}}}},[[142,1,2]]]);
//# sourceMappingURL=main.f6cdd2cf.chunk.js.map