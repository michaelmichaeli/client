(this.webpackJsonpxo=this.webpackJsonpxo||[]).push([[0],{124:function(e,t,n){},145:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(15),i=n.n(a),s=n(197),o=(n(124),n(12)),l=n(39),u=Object(l.a)(),j=n.p+"static/media/logo.5a7511e7.svg",d=n(201),b=n(202),m=n(178),h=n(183),O=n(203),x=n(71),f=n.n(x),p=n(93),v=n.n(p),g=n(72),y=n.n(g),N=n(94),w=n.n(N),k=n(92),C=n.n(k),U=n(52),R=n(56);R.a.initializeApp({apiKey:"AIzaSyASxXnbaJUXVhul4jHBW8m-Xq_k9KOx7mM",authDomain:"xo-game-f3a16.firebaseapp.com",databaseURL:"https://xo-game-f3a16-default-rtdb.europe-west1.firebasedatabase.app",projectId:"xo-game-f3a16",storageBucket:"xo-game-f3a16.appspot.com",messagingSenderId:"845770346317",appId:"1:845770346317:web:211d6ddd42f8055e3ff104"});var S=R.a.firestore(),A=R.a.auth(),I=n(181),T=n(184),L=n(91),E=n.n(L),M=n(3),X=function(e){var t=e.user,n=Object(r.useState)([]),c=Object(o.a)(n,2),a=c[0],i=c[1],s=S.collection("rooms/"),l=Object(r.useState)(null),u=Object(o.a)(l,2),j=u[0],x=u[1],f=Boolean(j),p=function(){x(null)},v=Object(r.useState)([]),g=Object(o.a)(v,2),y=g[0],N=g[1];Object(r.useEffect)((function(){var e=[];a&&a.map((function(n){n.game.turnUser.uid===t.uid&&n.game.player2&&e.push(n)})),N(e)}),[a]),Object(r.useEffect)((function(){s.orderBy("createdAt").onSnapshot((function(e){i(w(e.docs).reverse())}))}),[]);var w=function(e){var t=[];return e.forEach((function(e){var n=e.data();n.id=e.id,t.push(n)})),t};if(a&&t)return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(m.a,{"aria-controls":"fade-menu","aria-haspopup":"true",onClick:function(e){t&&x(e.currentTarget)},children:Object(M.jsx)(I.a,{badgeContent:y.length,color:"primary",children:Object(M.jsx)(E.a,{})})}),Object(M.jsxs)(d.a,{id:"fade-menu",anchorEl:j,keepMounted:!1,open:f,onClose:p,TransitionComponent:h.a,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[y.length?"":"No New Notifications",y.length?"It's Your Turn Against":"",!!y&&y.map((function(e){var n=e.game,r=n.player2,c=n.player1,a=r&&r.uid===t.uid?c:r;return Object(M.jsxs)("div",{children:[Object(M.jsx)(T.a,{variant:"middle"}),Object(M.jsxs)(b.a,{onClick:p,className:"menu-item",children:[Object(M.jsx)(O.a,{src:a.photoURL,alt:a.photoURL}),Object(M.jsx)("a",{href:"/multiplayer/".concat(e.id),children:a.displayName})]})]},e.id)}))]})]})},P=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(o.a)(a,2),s=i[0],l=i[1],x=Object(U.a)(A),p=Object(o.a)(x,1)[0],g=function(){var e=Object(r.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Boolean(n);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(m.a,{"aria-controls":"fade-menu","aria-haspopup":"true",onClick:function(e){a(e.currentTarget)},children:Object(M.jsx)(O.a,{src:p.photoURL,alt:""})}),Object(M.jsx)(d.a,{id:"fade-menu",anchorEl:n,keepMounted:!0,open:i,onClose:function(){a(null)},TransitionComponent:h.a,children:Object(M.jsx)(b.a,{onClick:function(){A.signOut(),c(!1)},children:"Logout"})})]})};return Object(M.jsx)("div",{className:"nav-bar-wrap full",children:Object(M.jsxs)("div",{className:"nav-bar flex align-center",children:[(n||s)&&Object(M.jsx)("div",{className:"screen",onClick:function(){c(!1),l(!1)}}),Object(M.jsxs)(m.a,{onClick:function(){u.push("/")},className:"logo",children:[Object(M.jsx)("img",{src:j,alt:""}),Object(M.jsx)("h2",{children:"Tic Tac Toe"})]}),Object(M.jsxs)("ul",{className:"main-nav clean-list flex align-center justify-center ".concat(n?"menu-open":""),children:[Object(M.jsx)("li",{className:"home",children:Object(M.jsxs)(m.a,{onClick:function(){c(!1),u.push("/")},children:[Object(M.jsx)(C.a,{}),"Home"]})}),Object(M.jsx)("li",{className:"ai",children:Object(M.jsxs)(m.a,{onClick:function(){c(!1),u.push("/ai")},children:[Object(M.jsx)(f.a,{}),"Ai Game"]})}),Object(M.jsx)("li",{className:"rooms",children:Object(M.jsxs)(m.a,{onClick:function(){c(!1),u.push("/rooms")},children:[Object(M.jsx)(y.a,{}),"Game Rooms"]})}),Object(M.jsx)("li",{className:"about",children:Object(M.jsxs)(m.a,{onClick:function(){c(!1),u.push("/about")},children:[Object(M.jsx)(v.a,{}),"About"]})}),Object(M.jsx)("li",{className:"user",children:p?Object(M.jsx)(g,{}):Object(M.jsxs)(m.a,{children:[Object(M.jsx)(w.a,{}),"Sign In"]})}),Object(M.jsx)("li",{className:"notifications",children:p&&Object(M.jsx)(X,{user:p})})]}),Object(M.jsxs)("div",{className:"nav-icon ".concat(n?"open":""),onClick:function(){return c(!n)},children:[Object(M.jsx)("span",{}),Object(M.jsx)("span",{}),Object(M.jsx)("span",{}),Object(M.jsx)("span",{})]})]})})},D=n(95),F=n.n(D),z=n(97),q=n.n(z),W=n(96),J=n.n(W),B=function(){return Object(M.jsxs)("div",{className:"footer flex align-center justify-center full",children:[Object(M.jsx)(F.a,{}),Object(M.jsx)("p",{children:"2021 Designed and developed by Michael Michaeli"}),Object(M.jsx)("a",{href:"https://github.com/michaelmichaeli/",target:"_blank",rel:"noreferrer",children:Object(M.jsx)(J.a,{})}),Object(M.jsx)("a",{href:"https://www.linkedin.com/in/michael-michaeli-a620b9b0/",target:"_blank",rel:"noreferrer",children:Object(M.jsx)(q.a,{})})]})},Y=function(){return Object(M.jsx)("div",{className:"home-page flex column align-center justify-center",children:Object(M.jsxs)("main",{className:"flex column align-center justify-center",children:[Object(M.jsx)("h2",{children:"Welcome To"}),Object(M.jsx)("h1",{children:"Tic Tac Toe"}),Object(M.jsx)("p",{children:"Play Against Ai or with Friends In Realtime Multiplayer rooms"}),Object(M.jsxs)("section",{className:"menu flex column",children:[Object(M.jsxs)("a",{href:"/ai",children:[Object(M.jsx)(f.a,{})," Play Against Ai"]}),Object(M.jsxs)("a",{href:"/rooms",children:[Object(M.jsx)(y.a,{})," Play With Friends"]})]})]})})},V=n(44);function _(e){if(e&&!e.every((function(e){return e.every((function(e){return!e}))})))return e[0][0]&&e[0][0]===e[0][1]&&e[0][0]===e[0][2]?e[0][0]:e[1][0]&&e[1][0]===e[1][1]&&e[1][0]===e[1][2]?e[1][0]:e[2][0]&&e[2][0]===e[2][1]&&e[2][0]===e[2][2]?e[2][0]:e[0][0]&&e[0][0]===e[1][0]&&e[0][0]===e[2][0]?e[0][0]:e[0][1]&&e[0][1]===e[1][1]&&e[0][1]===e[2][1]?e[0][1]:e[0][2]&&e[0][2]===e[1][2]&&e[0][2]===e[2][2]?e[0][2]:e[0][0]&&e[0][0]===e[1][1]&&e[0][0]===e[2][2]?e[0][0]:e[0][2]&&e[0][2]===e[1][1]&&e[0][2]===e[2][0]?e[0][2]:e.every((function(e){return e.every((function(e){return!!e}))}))?"Tie":null}var G={X:-1,O:1,Tie:0};function H(e,t){var n=_(e);if(null!==n)return G[n];if(t){for(var r=-1/0,c=0;c<3;c++)for(var a=0;a<3;a++)if(null===e[c][a]){e[c][a]="O";var i=H(e,!1);e[c][a]=null,r=Math.max(i,r)}return r}for(var s=1/0,o=0;o<3;o++)for(var l=0;l<3;l++)if(null===e[o][l]){e[o][l]="X";var u=H(e,!0);e[o][l]=null,s=Math.min(u,s)}return s}var K=n(32),Q=n.n(K),Z=n(48),$=n.p+"static/media/x.507a0b3a.svg",ee=n.p+"static/media/o.31f7f953.svg",te=function(e){var t=e.index,n=e.value,r=e.handleClick,c=e.winner,a=e.isUserTurn;return Object(M.jsxs)("button",{className:"square ".concat(t.i,"-").concat(t.j," ").concat(c?"win":""),onClick:function(){return r(t)},disabled:!!n||!a,children:["X"===n&&Object(M.jsx)("img",{src:$,alt:"X"}),"O"===n&&Object(M.jsx)("img",{src:ee,alt:"O"})]})},ne=n(185),re=function(e){var t=e.squares,n=e.handleClick,c=e.winner,a=e.isUserTurn,i=e.winnerUser,s=void 0===i?null:i,l=e.isAiThinking,u=void 0===l?null:l,j=Object(r.useState)(null),d=Object(o.a)(j,2),b=d[0],m=d[1];Object(r.useEffect)((function(){(function(){var e=Object(Z.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=s,!e.t0){e.next=7;break}return e.t1=m,e.next=5,s();case 5:e.t2=e.sent,(0,e.t1)(e.t2);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]);var h=function(){return Object(M.jsxs)("div",{className:"declaration",children:["Tie"===c&&Object(M.jsx)("h1",{className:"winner",children:"It's a Tie!"}),("X"===c||"O"===c)&&Object(M.jsxs)("div",{className:"winner",children:[Object(M.jsx)("img",{src:"X"===c?$:ee,alt:"X"===c?"X":"O"}),!b&&Object(M.jsx)("h3",{children:"Won!"}),b&&Object(M.jsxs)("h3",{children:[b.displayName," Won!"]})]})]})},O=function(){return Object(M.jsx)("div",{className:"your-turn",children:Object(M.jsx)("h1",{children:"Your Turn"})})};return Object(M.jsxs)("div",{className:"board-wrapper",children:[Object(M.jsx)("div",{className:"board ".concat(c&&"win"),children:t.map((function(e,t){return e.map((function(e,r){return Object(M.jsx)(te,{index:{i:t,j:r},value:e,handleClick:n,winner:c,isUserTurn:a},"".concat(t,"-").concat(r))}))}))}),Object(M.jsx)(h,{}),a&&!c&&Object(M.jsx)(O,{}),u&&Object(M.jsx)("div",{className:"loading",children:Object(M.jsx)(ne.a,{size:"200px",color:"inherit"})})]})},ce=function(){var e=Object(r.useState)(Array.from(Array(3),(function(){return new Array(3).fill(null)}))),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(o.a)(a,2),s=i[0],l=i[1],u=_(n),j=function(e){var t=function(e){for(var t,n=-1/0,r=0;r<3;r++)for(var c=0;c<3;c++)if(null===e[r][c]){e[r][c]="O";var a=H(e,!1);e[r][c]=null,a>n&&(n=a,t={i:r,j:c})}return t}(e);e[t.i][t.j]="O",c(e)};return Object(M.jsxs)("div",{className:"ai flex align-center justify-center",children:[Object(M.jsx)(re,{winner:u,squares:n,handleClick:function(e){var t=e.i,r=e.j;if(!(u||n[t][r]||s)){var a=Object(V.a)(n);a[t][r]="X",c(a),_(n)||(l(!0),setTimeout((function(){j(n),l(!1)}),1e3))}},isUserTurn:!s,isAiThinking:s}),Object(M.jsx)("button",{className:"restart  ".concat(u&&"won"),onClick:function(){c(Array.from(Array(3),(function(){return new Array(3).fill(null)}))),u=null},children:Object(M.jsx)("p",{children:"Restart"})})]})},ae=n(49),ie=n(98),se=n(73),oe=n.n(se),le=function(e){var t=e.txt,n=e.createdAt,r=e.isSent,c=e.photoURL,a=r?"sent":"received";return Object(M.jsxs)("div",{className:"wrap flex align-center "+a,children:[!r&&Object(M.jsx)("img",{src:c,alt:"avatar"}),Object(M.jsx)("div",{className:"message flex between align-center "+a,children:Object(M.jsx)("p",{children:t})}),Object(M.jsx)("span",{children:oe()(n).fromNow()})]})},ue=n(100),je=n.n(ue),de=n(99),be=n.n(de),me=n(186),he=function(e){var t=e.roomId,n=e.user,c=e.messages,a=Object(r.useState)(""),i=Object(o.a)(a,2),s=i[0],l=i[1],u=Object(r.useState)(!1),j=Object(o.a)(u,2),d=j[0],b=j[1],m=Object(r.useRef)(),h=S.collection("rooms").doc(t);Object(r.useEffect)((function(){m.current&&m.current.scrollIntoView({behavior:"smooth"})}),[c]);var O=function(){var e=Object(Z.a)(Q.a.mark((function e(t){var r,c,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,h.get();case 5:return r=e.sent.data(),c=Object(ae.a)({},r),a={id:Object(ie.makeId)(),txt:s,createdAt:Date.now(),photoURL:n.photoURL,userId:n.uid},c.messages.push(a),e.next=11,h.update(c);case 11:l(""),m.current.scrollIntoView({behavior:"smooth"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:"chat flex column",children:[Object(M.jsxs)("div",{className:"header",onClick:function(){b(!d),m.current&&m.current.scrollIntoView({behavior:"smooth"})},children:[Object(M.jsx)(be.a,{}),Object(M.jsx)("p",{children:" Room Chat "}),Object(M.jsx)("svg",{className:"arrow ".concat(!d&&"upsidedown"),width:"10px",height:"10px",viewBox:"0 0 18 10",children:Object(M.jsx)("path",{fill:"black",d:"M1 2.414A1 1 0 012.414 1L8.293 6.88a1 1 0 001.414 0L15.586 1A1 1 0 0117 2.414L9.707 9.707a1 1 0 01-1.414 0L1 2.414z"})})]}),Object(M.jsx)(me.a,{direction:"up",in:d,mountOnEnter:!0,unmountOnExit:!0,children:Object(M.jsxs)("main",{children:[(!c||!c.length)&&Object(M.jsxs)("div",{className:"no-messages",children:[Object(M.jsx)("p",{children:"No Messages Yet"}),Object(M.jsx)("p",{children:"Let The Trash-Talk Begin"})]}),c&&c.map((function(e){return Object(M.jsx)(le,{txt:e.txt,createdAt:e.createdAt,photoURL:e.photoURL,isSent:n.uid===e.userId},e.id)})),Object(M.jsx)("div",{ref:m})]})}),Object(M.jsx)(me.a,{direction:"up",in:d,mountOnEnter:!0,unmountOnExit:!0,children:Object(M.jsxs)("form",{onSubmit:O,children:[Object(M.jsx)("input",{placeholder:"Aa",value:s,onChange:function(e){return l(e.target.value)}}),Object(M.jsx)("button",{disabled:!s,type:"submit",children:Object(M.jsx)(je.a,{})})]})})]})}):null},Oe=n(7),xe=n(101),fe=n.n(xe),pe=function(){var e={signInFlow:"popup",signInOptions:[Oe.a.auth.GoogleAuthProvider.PROVIDER_ID,Oe.a.auth.FacebookAuthProvider.PROVIDER_ID,Oe.a.auth.GithubAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}};return Object(M.jsxs)("div",{className:"login flex column align-center justify-center",children:[Object(M.jsx)("h2",{children:"Please Sign-In"}),Object(M.jsx)(fe.a,{uiConfig:e,firebaseAuth:Oe.a.auth()})]})},ve=function(e){var t=e.currentPlayer,n=e.currentSymbol,r=e.winner;return Object(M.jsxs)("div",{className:"current-player-preview flex between ".concat(r&&"won"),children:[Object(M.jsx)("div",{className:"symbol",children:Object(M.jsx)("img",{src:"X"===n?$:ee,alt:"X"===n?"X":"O"})}),Object(M.jsxs)("div",{className:"next-player",children:[Object(M.jsx)("p",{className:"next-player",children:"Next Player:"}),Object(M.jsx)("p",{className:"display-name",children:null===t||void 0===t?void 0:t.displayName})]})]})},ge=n(103),ye=n.n(ge),Ne=n(187),we=n(188),ke=n(189),Ce=n(190),Ue=n(191),Re=n(192),Se=n(193),Ae=n(194),Ie=n(195),Te=n(196),Le=function(e){var t=e.roomId,n="http://localhost:3000/multiplayer/".concat(t),r="Join my game of Tic Tac Toe";return Object(M.jsxs)("div",{className:"share flex align-center wrap",children:[Object(M.jsx)(ye.a,{}),Object(M.jsx)("p",{children:"Invite Your Friends:"}),Object(M.jsx)(Ne.a,{url:n,quote:r,className:"share-button",children:Object(M.jsx)(we.a,{size:"2rem",round:!0})}),Object(M.jsx)(ke.a,{url:n,title:r,className:"share-button",children:Object(M.jsx)(Ce.a,{size:"2rem",round:!0})}),Object(M.jsx)(Ue.a,{url:n,title:r,separator:": ",className:"share-button",children:Object(M.jsx)(Re.a,{size:"2rem",round:!0})}),Object(M.jsx)(Se.a,{url:n,title:r,windowWidth:750,windowHeight:600,className:"share-button",children:Object(M.jsx)(Ae.a,{size:"2rem",round:!0})}),Object(M.jsx)(Ie.a,{url:n,subject:r,body:"Check out this cool game: ",className:"share-button",children:Object(M.jsx)(Te.a,{size:"2rem",round:!0})})]})},Ee=n(106),Me=n.n(Ee),Xe=n(105),Pe=n.n(Xe),De=function(){var e=Object(s.d)().roomId,t=Object(r.useState)(!0),n=Object(o.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(!0),l=Object(o.a)(i,2),u=l[0],j=l[1],d=Object(U.a)(A),b=Object(o.a)(d,1)[0];A.onAuthStateChanged((function(e){return j(!1)}));var m=Object(r.useState)(null),h=Object(o.a)(m,2),O=h[0],x=h[1],f=Object(r.useState)(!1),p=Object(o.a)(f,2),v=p[0],g=p[1],y=Object(r.useState)(!0),N=Object(o.a)(y,2),w=N[0],k=N[1],C=S.collection("rooms").doc(e);Object(r.useEffect)((function(){C.onSnapshot((function(e){x(e.data()),a(!1)}))}),[]),Object(r.useEffect)((function(){return b&&O&&"hidden"!==document.visibilityState&&I(),document.addEventListener("visibilitychange",(function(){b&&O&&("hidden"===document.visibilityState?R():I())})),function(){document.removeEventListener("visibilitychange",R),document.removeEventListener("visibilitychange",I)}}),[O,b]),Object(r.useEffect)((function(){if(O&&O.onlineUsers.length){var e=O.game,t=e.player1,n=e.player2,r=e.turnUser;g(t.uid===r.uid&&-1===O.onlineUsers.findIndex((function(e){return e.uid===t.uid}))),n&&k(n.uid===r.uid&&-1===O.onlineUsers.findIndex((function(e){return e.uid===n.uid})))}}),[O]);var R=function(){var e=Object(Z.a)(Q.a.mark((function e(){var t;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.get();case 2:return(t=e.sent.data()).onlineUsers=t.onlineUsers.filter((function(e){return e.uid!==b.uid})),e.next=6,C.update(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(Z.a)(Q.a.mark((function e(){var t,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.get();case 2:if(t=e.sent.data()){e.next=5;break}return e.abrupt("return");case 5:return n={uid:b.uid,displayName:b.displayName,photoURL:b.photoURL},b.uid!==t.game.player1.uid&&(t.game.player2||(t.game.player2=n)),t.onlineUsers.findIndex((function(e){return e.uid===b.uid}))<0&&t.onlineUsers.push(n),e.next=10,C.update(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e){if(e&&!e.every((function(e){return e.every((function(e){return!e}))})))return e[0][0]&&e[0][0]===e[0][1]&&e[0][0]===e[0][2]?e[0][0]:e[1][0]&&e[1][0]===e[1][1]&&e[1][0]===e[1][2]?e[1][0]:e[2][0]&&e[2][0]===e[2][1]&&e[2][0]===e[2][2]?e[2][0]:e[0][0]&&e[0][0]===e[1][0]&&e[0][0]===e[2][0]?e[0][0]:e[0][1]&&e[0][1]===e[1][1]&&e[0][1]===e[2][1]?e[0][1]:e[0][2]&&e[0][2]===e[1][2]&&e[0][2]===e[2][2]?e[0][2]:e[0][0]&&e[0][0]===e[1][1]&&e[0][0]===e[2][2]?e[0][0]:e[0][2]&&e[0][2]===e[1][1]&&e[0][2]===e[2][0]?e[0][2]:e.every((function(e){return e.every((function(e){return!!e}))}))?"Tie":null},L=function(){var e=O.game,t=e.player1,n=e.player2;return v&&!w?Object(M.jsxs)("section",{className:"waiting flex column align-center",children:[Object(M.jsx)(ne.a,{color:"inherit"}),Object(M.jsxs)("p",{children:["Waiting for Player 1 (",t.displayName,") to come back"]})]}):w&&!v?Object(M.jsxs)("section",{className:"waiting flex column align-center",children:[Object(M.jsx)(ne.a,{color:"inherit"}),Object(M.jsxs)("p",{children:["Waiting for Player 2 ",n?"(".concat(n.displayName,") to come back"):" to join the room"]})]}):void 0};if(c||u)return Object(M.jsx)("div",{className:"loader-spinner flex column align-center justify-center",children:Object(M.jsx)(ne.a,{size:"100px",color:"inherit"})});if(!O&&!c)return Object(M.jsx)("div",{className:"multiplayer flex column align-center justify-center",children:Object(M.jsxs)("div",{className:"no-room flex column align-center justify-center",children:[Object(M.jsx)("h2",{children:"Oops... Something went wrong"}),Object(M.jsx)("p",{children:"Probably an address typo or this room doesn't exist anymore."}),Object(M.jsxs)("p",{children:["You can create a new game room from the",Object(M.jsx)("a",{href:"/rooms",children:"Rooms-page."})]})]})});if(!b&&!u)return Object(M.jsx)(pe,{});if(O&&b&&!c&&!u){var E=O.game,X=E.squares,P=E.turnUser,D=E.winner,F=E.player1,z=E.player2,q=O.messages,W=O.creator,J=O.onlineUsers;return Object(M.jsxs)("div",{className:"multiplayer flex column align-center",children:[Object(M.jsxs)("header",{className:"flex between align-center",children:[P&&Object(M.jsx)(ve,{currentPlayer:P,currentSymbol:P.uid===W.uid?"X":"O",winner:D}),Object(M.jsx)("div",{className:"middle flex column align-center justify-center",children:Object(M.jsxs)("h2",{children:[W.displayName,"'s Room"]})}),b.uid===F.uid||z&&b.uid===z.uid?Object(M.jsxs)("div",{className:"restart flex  ".concat(D&&"won"),onClick:function(){return function(){if(O.game.winner&&(b.uid===O.game.player1.uid||b.uid===O.game.player2.uid)){var e=Object(ae.a)({},O);e.game.winner=null,e.game.squares=JSON.stringify([["","",""],["","",""],["","",""]]),C.update(e)}}()},children:[Object(M.jsx)("div",{className:"text",children:Object(M.jsx)("p",{children:"Restart"})}),Object(M.jsx)("div",{className:"symbol",children:Object(M.jsx)(Pe.a,{})})]}):Object(M.jsx)("div",{className:"restart-dummy"})]}),Object(M.jsx)(re,{squares:JSON.parse(X),handleClick:function(e){var t=e.i,n=e.j,r=O.game,c=r.squares,a=r.turnUser,i=r.winner,s=r.player1,o=r.player2,l=O.creator;if(!i&&""!==c[t][n]&&a.uid===b.uid&&o){var u=Object(V.a)(JSON.parse(c));u[t][n]=b.uid===l.uid?"X":"O";var j=a.uid===O.game.player1.uid?o:s,d=Object(ae.a)({},O);d.game.winner=T(u),u=JSON.stringify(u),d.game.squares=u,d.game.turnUser=j,C.update(d)}},winner:D,isUserTurn:(null===P||void 0===P?void 0:P.uid)===b.uid,winnerUser:function(){var e=O.game,t=e.winner,n=e.player1,r=e.player2;return t&&"Tie"!==t?"X"===t?n:r:null}}),(v||w)&&Object(M.jsx)(L,{}),Object(M.jsxs)("section",{className:"online-players flex align-center wrap",children:[Object(M.jsx)(Me.a,{}),Object(M.jsx)("p",{children:"Online Right Now:"}),J.map((function(e){return Object(M.jsxs)("div",{className:"player flex justify-center align-center",children:[Object(M.jsx)("img",{src:e.photoURL,alt:e.photoURL}),Object(M.jsx)("p",{children:e.displayName[0]})]},e.uid)}))]}),Object(M.jsx)(Le,{roomId:e}),Object(M.jsx)(he,{messages:q,roomId:e,user:b})]})}},Fe=function(){return Object(M.jsx)("div",{className:"about flex align-center justify-center",children:"I Am About"})},ze=n(81),qe=n.n(ze),We=n(107),Je=n.n(We),Be=n(108),Ye=n.n(Be),Ve=n(109),_e=n.n(Ve),Ge=n(204),He=n(199),Ke=n(198),Qe=n(205),Ze=r.forwardRef((function(e,t){return Object(M.jsx)(me.a,Object(ae.a)({direction:"up",ref:t},e))}));function $e(e){var t=e.roomId,n=e.openDeleteModal,r=e.handleDeleteModalClose;return Object(M.jsx)("div",{children:Object(M.jsxs)(Ge.a,{open:n,TransitionComponent:Ze,keepMounted:!0,onClose:r,"aria-describedby":"alert-dialog-slide-description",children:[Object(M.jsx)(Ke.a,{children:Object(M.jsx)(Qe.a,{id:"alert-dialog-slide-description",children:"Are your sure you want to remove this room permanently?"})}),Object(M.jsxs)(He.a,{children:[Object(M.jsx)(m.a,{onClick:function(){return r(!0,t)},children:"Remove"}),Object(M.jsx)(m.a,{onClick:r,children:"No"})]})]})})}var et=function(e){var t=e.localRooms,n=(e.goToRoom,e.user),c=e.onDeleteRoom,a=Object(r.useState)(t),i=Object(o.a)(a,2),s=i[0],l=i[1];Object(r.useEffect)((function(){l(t)}),[t]);var u=Object(r.useState)(!1),j=Object(o.a)(u,2),d=j[0],b=j[1],m=function(){b(!0)},h=function(e,t){b(!1),e&&c(t)},O=function(e){var t=e.room,n=e.user,r=t.game,c=r.player1,a=r.player2,i=r.turnUser,s=i.uid===c.uid?"Your Turn":"Opponents turn";if(c.uid===n.uid)return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(qe.a,{}),Object(M.jsx)("p",{children:s})]});if(!a)return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Je.a,{}),Object(M.jsx)("p",{children:"Join"})]});var o=i.uid===a.uid?"Your Turn":"Opponents turn";return a.uid===n.uid?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(qe.a,{}),Object(M.jsx)("p",{children:o})]}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Ye.a,{}),Object(M.jsx)("p",{children:"Watch"})]})};return Object(M.jsxs)("section",{className:"rooms-list",children:[Object(M.jsxs)("header",{children:[Object(M.jsx)("div",{className:"creator",onClick:function(){return function(){var e=Object(V.a)(s);e.sort((function(e,t){var n=e.creator.displayName.toUpperCase(),r=t.creator.displayName.toUpperCase();return n<r?-1:n>r?1:0})),e.every((function(e,t){return e.id===s[t].id}))&&e.reverse(),l(e)}()},children:"Player"}),Object(M.jsx)("div",{className:"player2",onClick:function(){return function(){var e=Object(V.a)(s);e.sort((function(e,t){var n,r,c=null===(n=e.game.player2)||void 0===n?void 0:n.displayName.toUpperCase(),a=null===(r=t.game.player2)||void 0===r?void 0:r.displayName.toUpperCase();return c&&a?c<a?-1:c>a?1:0:-2})),e.every((function(e,t){return e.id===s[t].id}))&&e.reverse(),l(e)}()},children:"Opponent"}),Object(M.jsx)("div",{className:"time",onClick:function(){return function(){var e=Object(V.a)(s);e.sort((function(e,t){return e.createdAt.seconds-t.createdAt.seconds})),e.every((function(e,t){return e.id===s[t].id}))&&e.reverse(),l(e)}()},children:"Created"}),Object(M.jsx)("div",{children:"Enter"})]}),Object(M.jsx)("main",{children:s.map((function(e){return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("div",{className:"room-row",children:[Object(M.jsxs)("div",{className:"creator flex align-center",children:[Object(M.jsx)("img",{src:e.creator.photoURL,alt:e.creator.photoURL}),e.creator.uid===n.uid?"You":e.creator.displayName]}),Object(M.jsxs)("div",{className:"player2 flex align-center",children:[e.game.player2&&Object(M.jsx)("img",{src:e.game.player2.photoURL,alt:e.game.player2.photoURL}),e.game.player2&&e.game.player2.uid===n.uid&&"You",e.game.player2&&e.game.player2.uid!==n.uid&&e.game.player2.displayName,!e.game.player2&&"Waiting..."]}),e.createdAt&&Object(M.jsx)("div",{className:"time flex justify-center align-center",children:oe()(1e3*e.createdAt.seconds).fromNow()}),n.uid===e.creator.uid?Object(M.jsx)("button",{className:"trash flex justify-center align-center",onClick:m,children:Object(M.jsx)(_e.a,{})}):Object(M.jsx)("div",{className:"trash",children:" "}),Object(M.jsx)("a",{href:"/multiplayer/".concat(e.id),className:"join flex align-center justify-center",children:Object(M.jsx)(O,{room:e,user:n})})]},e.id),Object(M.jsx)($e,{roomId:e.id,handleDeleteModalClose:h,openDeleteModal:d})]})}))})]})},tt=n(110),nt=n.n(tt),rt=function(){var e=Object(r.useState)(!0),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!0),i=Object(o.a)(a,2),s=i[0],l=i[1],j=Object(U.a)(A),d=Object(o.a)(j,1)[0];A.onAuthStateChanged((function(e){return l(!1)}));var b=Object(r.useState)([]),m=Object(o.a)(b,2),h=m[0],O=m[1],x=S.collection("rooms/");Object(r.useEffect)((function(){x.orderBy("createdAt").onSnapshot((function(e){O(f(e.docs).reverse()),c(!1)}))}),[]);var f=function(e){var t=[];return e.forEach((function(e){var n=e.data();n.id=e.id,t.push(n)})),t},p=function(e){u.push("/multiplayer/".concat(e))};return s?Object(M.jsx)("div",{className:"loader-spinner flex column align-center justify-center",children:Object(M.jsx)(ne.a,{size:"100px",color:"inherit"})}):d||s?Object(M.jsxs)("section",{className:"rooms-container home-page flex column align-center justify-center",children:[Object(M.jsx)("img",{className:"user-photo",src:d.photoURL,alt:d.photoURL}),Object(M.jsx)("h2",{className:"user-name",children:d.displayName}),Object(M.jsxs)("div",{className:"rooms flex column justify-center align-center between",children:[!n&&h.length>0&&Object(M.jsx)(et,{user:d,goToRoom:p,localRooms:h,onDeleteRoom:function(e){x.doc(e).delete()}}),!n&&(!h||0===h.length)&&Object(M.jsxs)("div",{className:"no-rooms",children:[Object(M.jsx)("p",{children:"Looks like all the game rooms expired."}),Object(M.jsx)("p",{children:"Create a new room and invite your friends."})]}),n&&Object(M.jsx)("div",{className:"loader-spinner flex column align-center justify-center",children:Object(M.jsx)(ne.a,{color:"inherit"})}),Object(M.jsxs)("button",{onClick:function(){var e={uid:d.uid,displayName:d.displayName,photoURL:d.photoURL},t={creator:e,createdAt:R.a.firestore.FieldValue.serverTimestamp(),game:{turnUser:e,player1:e,player2:null,squares:JSON.stringify([["","",""],["","",""],["","",""]]),winner:null},messages:[],onlineUsers:[]};x.add(t).then((function(e){return p(e.id)}))},children:[Object(M.jsx)(nt.a,{}),"Create New Room"]})]})]}):Object(M.jsx)(pe,{})};var ct=function(){return Object(M.jsxs)("div",{className:"App main-container",children:[Object(M.jsx)(P,{}),Object(M.jsxs)(s.c,{children:[Object(M.jsx)(s.a,{component:Y,exact:!0,path:"/"}),Object(M.jsx)(s.a,{component:Fe,exact:!0,path:"/about"}),Object(M.jsx)(s.a,{component:ce,exact:!0,path:"/ai"}),Object(M.jsx)(s.a,{component:rt,exact:!0,path:"/rooms"}),Object(M.jsx)(s.a,{component:De,exact:!0,path:"/multiplayer/:roomId?"})]}),Object(M.jsx)(B,{})]})};i.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(s.b,{basename:"/xo",history:u,children:Object(M.jsx)(ct,{})})}),document.getElementById("root"))},98:function(e,t){e.exports={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}}}},[[145,1,2]]]);
//# sourceMappingURL=main.cfd6dad6.chunk.js.map