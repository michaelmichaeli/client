(this.webpackJsonpxo=this.webpackJsonpxo||[]).push([[0],{125:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(15),i=n.n(a),s=n(66),o=n(20),l=(n(125),n(12)),u=n(29),j=Object(u.a)(),d=n.p+"static/media/logo.5a7511e7.svg",b=n(201),m=n(202),h=n(179),O=n(184),x=n(203),f=n(73),p=n.n(f),v=n(94),g=n.n(v),y=n(74),N=n.n(y),w=n(95),k=n.n(w),C=n(93),U=n.n(C),R=n(53),S=n(57);S.a.initializeApp({apiKey:"AIzaSyASxXnbaJUXVhul4jHBW8m-Xq_k9KOx7mM",authDomain:"xo-game-f3a16.firebaseapp.com",databaseURL:"https://xo-game-f3a16-default-rtdb.europe-west1.firebasedatabase.app",projectId:"xo-game-f3a16",storageBucket:"xo-game-f3a16.appspot.com",messagingSenderId:"845770346317",appId:"1:845770346317:web:211d6ddd42f8055e3ff104"});var A=S.a.firestore(),I=S.a.auth(),T=n(182),L=n(185),E=n(92),M=n.n(E),X=n(3),P=function(e){var t=e.user,n=Object(r.useState)([]),c=Object(l.a)(n,2),a=c[0],i=c[1],s=A.collection("rooms/"),o=Object(r.useState)(null),u=Object(l.a)(o,2),j=u[0],d=u[1],f=Boolean(j),p=function(){d(null)},v=Object(r.useState)([]),g=Object(l.a)(v,2),y=g[0],N=g[1];Object(r.useEffect)((function(){var e=[];a&&a.map((function(n){n.game.turnUser.uid===t.uid&&n.game.player2&&e.push(n)})),N(e)}),[a]),Object(r.useEffect)((function(){s.orderBy("createdAt").onSnapshot((function(e){i(w(e.docs).reverse())}))}),[]);var w=function(e){var t=[];return e.forEach((function(e){var n=e.data();n.id=e.id,t.push(n)})),t};if(a&&t)return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(h.a,{"aria-controls":"fade-menu","aria-haspopup":"true",onClick:function(e){t&&d(e.currentTarget)},children:Object(X.jsx)(T.a,{badgeContent:y.length,color:"primary",children:Object(X.jsx)(M.a,{})})}),Object(X.jsxs)(b.a,{id:"fade-menu",anchorEl:j,keepMounted:!1,open:f,onClose:p,TransitionComponent:O.a,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[y.length?"":"No New Notifications",y.length?"It's Your Turn Against":"",!!y&&y.map((function(e){var n=e.game,r=n.player2,c=n.player1,a=r&&r.uid===t.uid?c:r;return Object(X.jsxs)("div",{children:[Object(X.jsx)(L.a,{variant:"middle"}),Object(X.jsxs)(m.a,{onClick:p,className:"menu-item",children:[Object(X.jsx)(x.a,{src:a.photoURL,alt:a.photoURL}),Object(X.jsx)("a",{href:"/multiplayer/".concat(e.id),children:a.displayName})]})]},e.id)}))]})]})},D=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(l.a)(a,2),s=i[0],o=i[1],u=Object(R.a)(I),f=Object(l.a)(u,1)[0],v=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Boolean(n);return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(h.a,{"aria-controls":"fade-menu","aria-haspopup":"true",onClick:function(e){a(e.currentTarget)},children:Object(X.jsx)(x.a,{src:f.photoURL,alt:""})}),Object(X.jsx)(b.a,{id:"fade-menu",anchorEl:n,keepMounted:!0,open:i,onClose:function(){a(null)},TransitionComponent:O.a,children:Object(X.jsx)(m.a,{onClick:function(){I.signOut(),c(!1)},children:"Logout"})})]})};return Object(X.jsx)("div",{className:"nav-bar-wrap full",children:Object(X.jsxs)("div",{className:"nav-bar flex align-center",children:[(n||s)&&Object(X.jsx)("div",{className:"screen",onClick:function(){c(!1),o(!1)}}),Object(X.jsxs)(h.a,{onClick:function(){j.push("/")},className:"logo",children:[Object(X.jsx)("img",{src:d,alt:""}),Object(X.jsx)("h2",{children:"Tic Tac Toe"})]}),Object(X.jsxs)("ul",{className:"main-nav clean-list flex align-center justify-center ".concat(n?"menu-open":""),children:[Object(X.jsx)("li",{className:"home",children:Object(X.jsxs)(h.a,{onClick:function(){c(!1),j.push("/")},children:[Object(X.jsx)(U.a,{}),"Home"]})}),Object(X.jsx)("li",{className:"ai",children:Object(X.jsxs)(h.a,{onClick:function(){c(!1),j.push("/ai")},children:[Object(X.jsx)(p.a,{}),"Ai Game"]})}),Object(X.jsx)("li",{className:"rooms",children:Object(X.jsxs)(h.a,{onClick:function(){c(!1),j.push("/rooms")},children:[Object(X.jsx)(N.a,{}),"Game Rooms"]})}),Object(X.jsx)("li",{className:"about",children:Object(X.jsxs)(h.a,{onClick:function(){c(!1),j.push("/about")},children:[Object(X.jsx)(g.a,{}),"About"]})}),Object(X.jsx)("li",{className:"user",children:f?Object(X.jsx)(v,{}):Object(X.jsxs)(h.a,{children:[Object(X.jsx)(k.a,{}),"Sign In"]})}),Object(X.jsx)("li",{className:"notifications",children:f&&Object(X.jsx)(P,{user:f})})]}),Object(X.jsxs)("div",{className:"nav-icon ".concat(n?"open":""),onClick:function(){return c(!n)},children:[Object(X.jsx)("span",{}),Object(X.jsx)("span",{}),Object(X.jsx)("span",{}),Object(X.jsx)("span",{})]})]})})},F=n(96),z=n.n(F),q=n(98),W=n.n(q),J=n(97),B=n.n(J),Y=function(){return Object(X.jsxs)("div",{className:"footer flex align-center justify-center full",children:[Object(X.jsx)(z.a,{}),Object(X.jsx)("p",{children:"2021 Designed and developed by Michael Michaeli"}),Object(X.jsx)("a",{href:"https://github.com/michaelmichaeli/",target:"_blank",rel:"noreferrer",children:Object(X.jsx)(B.a,{})}),Object(X.jsx)("a",{href:"https://www.linkedin.com/in/michael-michaeli-a620b9b0/",target:"_blank",rel:"noreferrer",children:Object(X.jsx)(W.a,{})})]})},V=function(){return Object(X.jsx)("div",{className:"home-page flex column align-center justify-center",children:Object(X.jsxs)("main",{className:"flex column align-center justify-center",children:[Object(X.jsx)("h2",{children:"Welcome To"}),Object(X.jsx)("h1",{children:"Tic Tac Toe"}),Object(X.jsx)("p",{children:"Play Against Ai or with Friends In Realtime Multiplayer rooms"}),Object(X.jsxs)("section",{className:"menu flex column",children:[Object(X.jsxs)("a",{href:"/ai",children:[Object(X.jsx)(p.a,{})," Play Against Ai"]}),Object(X.jsxs)("a",{href:"/rooms",children:[Object(X.jsx)(N.a,{})," Play With Friends"]})]})]})})},_=n(45);function G(e){if(e&&!e.every((function(e){return e.every((function(e){return!e}))})))return e[0][0]&&e[0][0]===e[0][1]&&e[0][0]===e[0][2]?e[0][0]:e[1][0]&&e[1][0]===e[1][1]&&e[1][0]===e[1][2]?e[1][0]:e[2][0]&&e[2][0]===e[2][1]&&e[2][0]===e[2][2]?e[2][0]:e[0][0]&&e[0][0]===e[1][0]&&e[0][0]===e[2][0]?e[0][0]:e[0][1]&&e[0][1]===e[1][1]&&e[0][1]===e[2][1]?e[0][1]:e[0][2]&&e[0][2]===e[1][2]&&e[0][2]===e[2][2]?e[0][2]:e[0][0]&&e[0][0]===e[1][1]&&e[0][0]===e[2][2]?e[0][0]:e[0][2]&&e[0][2]===e[1][1]&&e[0][2]===e[2][0]?e[0][2]:e.every((function(e){return e.every((function(e){return!!e}))}))?"Tie":null}var H={X:-1,O:1,Tie:0};function K(e,t){var n=G(e);if(null!==n)return H[n];if(t){for(var r=-1/0,c=0;c<3;c++)for(var a=0;a<3;a++)if(null===e[c][a]){e[c][a]="O";var i=K(e,!1);e[c][a]=null,r=Math.max(i,r)}return r}for(var s=1/0,o=0;o<3;o++)for(var l=0;l<3;l++)if(null===e[o][l]){e[o][l]="X";var u=K(e,!0);e[o][l]=null,s=Math.min(u,s)}return s}var Q=n(35),Z=n.n(Q),$=n(49),ee=n.p+"static/media/x.507a0b3a.svg",te=n.p+"static/media/o.31f7f953.svg",ne=function(e){var t=e.index,n=e.value,r=e.handleClick,c=e.winner,a=e.isUserTurn;return Object(X.jsxs)("button",{className:"square ".concat(t.i,"-").concat(t.j," ").concat(c?"win":""),onClick:function(){return r(t)},disabled:!!n||!a,children:["X"===n&&Object(X.jsx)("img",{src:ee,alt:"X"}),"O"===n&&Object(X.jsx)("img",{src:te,alt:"O"})]})},re=n(186),ce=function(e){var t=e.squares,n=e.handleClick,c=e.winner,a=e.isUserTurn,i=e.winnerUser,s=void 0===i?null:i,o=e.isAiThinking,u=void 0===o?null:o,j=Object(r.useState)(null),d=Object(l.a)(j,2),b=d[0],m=d[1];Object(r.useEffect)((function(){(function(){var e=Object($.a)(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=s,!e.t0){e.next=7;break}return e.t1=m,e.next=5,s();case 5:e.t2=e.sent,(0,e.t1)(e.t2);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]);var h=function(){return Object(X.jsxs)("div",{className:"declaration",children:["Tie"===c&&Object(X.jsx)("h1",{className:"winner",children:"It's a Tie!"}),("X"===c||"O"===c)&&Object(X.jsxs)("div",{className:"winner",children:[Object(X.jsx)("img",{src:"X"===c?ee:te,alt:"X"===c?"X":"O"}),!b&&Object(X.jsx)("h3",{children:"Won!"}),b&&Object(X.jsxs)("h3",{children:[b.displayName," Won!"]})]})]})},O=function(){return Object(X.jsx)("div",{className:"your-turn",children:Object(X.jsx)("h1",{children:"Your Turn"})})};return Object(X.jsxs)("div",{className:"board-wrapper",children:[Object(X.jsx)("div",{className:"board ".concat(c&&"win"),children:t.map((function(e,t){return e.map((function(e,r){return Object(X.jsx)(ne,{index:{i:t,j:r},value:e,handleClick:n,winner:c,isUserTurn:a},"".concat(t,"-").concat(r))}))}))}),Object(X.jsx)(h,{}),a&&!c&&Object(X.jsx)(O,{}),u&&Object(X.jsx)("div",{className:"loading",children:Object(X.jsx)(re.a,{size:"200px",color:"inherit"})})]})},ae=function(){var e=Object(r.useState)(Array.from(Array(3),(function(){return new Array(3).fill(null)}))),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(l.a)(a,2),s=i[0],o=i[1],u=G(n),j=function(e){var t=function(e){for(var t,n=-1/0,r=0;r<3;r++)for(var c=0;c<3;c++)if(null===e[r][c]){e[r][c]="O";var a=K(e,!1);e[r][c]=null,a>n&&(n=a,t={i:r,j:c})}return t}(e);e[t.i][t.j]="O",c(e)};return Object(X.jsxs)("div",{className:"ai flex align-center justify-center",children:[Object(X.jsx)(ce,{winner:u,squares:n,handleClick:function(e){var t=e.i,r=e.j;if(!(u||n[t][r]||s)){var a=Object(_.a)(n);a[t][r]="X",c(a),G(n)||(o(!0),setTimeout((function(){j(n),o(!1)}),1e3))}},isUserTurn:!s,isAiThinking:s}),Object(X.jsx)("button",{className:"restart  ".concat(u&&"won"),onClick:function(){c(Array.from(Array(3),(function(){return new Array(3).fill(null)}))),u=null},children:Object(X.jsx)("p",{children:"Restart"})})]})},ie=n(50),se=n(99),oe=n(75),le=n.n(oe),ue=function(e){var t=e.txt,n=e.createdAt,r=e.isSent,c=e.photoURL,a=r?"sent":"received";return Object(X.jsxs)("div",{className:"wrap flex align-center "+a,children:[!r&&Object(X.jsx)("img",{src:c,alt:"avatar"}),Object(X.jsx)("div",{className:"message flex between align-center "+a,children:Object(X.jsx)("p",{children:t})}),Object(X.jsx)("span",{children:le()(n).fromNow()})]})},je=n(101),de=n.n(je),be=n(100),me=n.n(be),he=n(187),Oe=function(e){var t=e.roomId,n=e.user,c=e.messages,a=Object(r.useState)(""),i=Object(l.a)(a,2),s=i[0],o=i[1],u=Object(r.useState)(!1),j=Object(l.a)(u,2),d=j[0],b=j[1],m=Object(r.useRef)(),h=A.collection("rooms").doc(t);Object(r.useEffect)((function(){m.current&&m.current.scrollIntoView({behavior:"smooth"})}),[c]);var O=function(){var e=Object($.a)(Z.a.mark((function e(t){var r,c,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,h.get();case 5:return r=e.sent.data(),c=Object(ie.a)({},r),a={id:Object(se.makeId)(),txt:s,createdAt:Date.now(),photoURL:n.photoURL,userId:n.uid},c.messages.push(a),e.next=11,h.update(c);case 11:o(""),m.current.scrollIntoView({behavior:"smooth"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)("div",{className:"chat flex column",children:[Object(X.jsxs)("div",{className:"header",onClick:function(){b(!d),m.current&&m.current.scrollIntoView({behavior:"smooth"})},children:[Object(X.jsx)(me.a,{}),Object(X.jsx)("p",{children:" Room Chat "}),Object(X.jsx)("svg",{className:"arrow ".concat(!d&&"upsidedown"),width:"10px",height:"10px",viewBox:"0 0 18 10",children:Object(X.jsx)("path",{fill:"black",d:"M1 2.414A1 1 0 012.414 1L8.293 6.88a1 1 0 001.414 0L15.586 1A1 1 0 0117 2.414L9.707 9.707a1 1 0 01-1.414 0L1 2.414z"})})]}),Object(X.jsx)(he.a,{direction:"up",in:d,mountOnEnter:!0,unmountOnExit:!0,children:Object(X.jsxs)("main",{children:[(!c||!c.length)&&Object(X.jsxs)("div",{className:"no-messages",children:[Object(X.jsx)("p",{children:"No Messages Yet"}),Object(X.jsx)("p",{children:"Let The Trash-Talk Begin"})]}),c&&c.map((function(e){return Object(X.jsx)(ue,{txt:e.txt,createdAt:e.createdAt,photoURL:e.photoURL,isSent:n.uid===e.userId},e.id)})),Object(X.jsx)("div",{ref:m})]})}),Object(X.jsx)(he.a,{direction:"up",in:d,mountOnEnter:!0,unmountOnExit:!0,children:Object(X.jsxs)("form",{onSubmit:O,children:[Object(X.jsx)("input",{placeholder:"Aa",value:s,onChange:function(e){return o(e.target.value)}}),Object(X.jsx)("button",{disabled:!s,type:"submit",children:Object(X.jsx)(de.a,{})})]})})]})}):null},xe=n(7),fe=n(102),pe=n.n(fe),ve=function(){var e={signInFlow:"popup",signInOptions:[xe.a.auth.GoogleAuthProvider.PROVIDER_ID,xe.a.auth.FacebookAuthProvider.PROVIDER_ID,xe.a.auth.GithubAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}};return Object(X.jsxs)("div",{className:"login flex column align-center justify-center",children:[Object(X.jsx)("h2",{children:"Please Sign-In"}),Object(X.jsx)(pe.a,{uiConfig:e,firebaseAuth:xe.a.auth()})]})},ge=function(e){var t=e.currentPlayer,n=e.currentSymbol,r=e.winner;return Object(X.jsxs)("div",{className:"current-player-preview flex between ".concat(r&&"won"),children:[Object(X.jsx)("div",{className:"symbol",children:Object(X.jsx)("img",{src:"X"===n?ee:te,alt:"X"===n?"X":"O"})}),Object(X.jsxs)("div",{className:"next-player",children:[Object(X.jsx)("p",{className:"next-player",children:"Next Player:"}),Object(X.jsx)("p",{className:"display-name",children:null===t||void 0===t?void 0:t.displayName})]})]})},ye=n(104),Ne=n.n(ye),we=n(188),ke=n(189),Ce=n(190),Ue=n(191),Re=n(192),Se=n(193),Ae=n(194),Ie=n(195),Te=n(196),Le=n(197),Ee=function(e){var t=e.roomId,n="http://localhost:3000/multiplayer/".concat(t),r="Join my game of Tic Tac Toe";return Object(X.jsxs)("div",{className:"share flex align-center wrap",children:[Object(X.jsx)(Ne.a,{}),Object(X.jsx)("p",{children:"Invite Your Friends:"}),Object(X.jsx)(we.a,{url:n,quote:r,className:"share-button",children:Object(X.jsx)(ke.a,{size:"2rem",round:!0})}),Object(X.jsx)(Ce.a,{url:n,title:r,className:"share-button",children:Object(X.jsx)(Ue.a,{size:"2rem",round:!0})}),Object(X.jsx)(Re.a,{url:n,title:r,separator:": ",className:"share-button",children:Object(X.jsx)(Se.a,{size:"2rem",round:!0})}),Object(X.jsx)(Ae.a,{url:n,title:r,windowWidth:750,windowHeight:600,className:"share-button",children:Object(X.jsx)(Ie.a,{size:"2rem",round:!0})}),Object(X.jsx)(Te.a,{url:n,subject:r,body:"Check out this cool game: ",className:"share-button",children:Object(X.jsx)(Le.a,{size:"2rem",round:!0})})]})},Me=n(107),Xe=n.n(Me),Pe=n(106),De=n.n(Pe),Fe=function(){var e=Object(o.f)().roomId,t=Object(r.useState)(!0),n=Object(l.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(!0),s=Object(l.a)(i,2),u=s[0],j=s[1],d=Object(R.a)(I),b=Object(l.a)(d,1)[0];I.onAuthStateChanged((function(e){return j(!1)}));var m=Object(r.useState)(null),h=Object(l.a)(m,2),O=h[0],x=h[1],f=Object(r.useState)(!1),p=Object(l.a)(f,2),v=p[0],g=p[1],y=Object(r.useState)(!0),N=Object(l.a)(y,2),w=N[0],k=N[1],C=A.collection("rooms").doc(e);Object(r.useEffect)((function(){C.onSnapshot((function(e){x(e.data()),a(!1)}))}),[]),Object(r.useEffect)((function(){return b&&O&&"hidden"!==document.visibilityState&&S(),document.addEventListener("visibilitychange",(function(){b&&O&&("hidden"===document.visibilityState?U():S())})),function(){document.removeEventListener("visibilitychange",U),document.removeEventListener("visibilitychange",S)}}),[O,b]),Object(r.useEffect)((function(){if(O&&O.onlineUsers.length){var e=O.game,t=e.player1,n=e.player2,r=e.turnUser;g(t.uid===r.uid&&-1===O.onlineUsers.findIndex((function(e){return e.uid===t.uid}))),n&&k(n.uid===r.uid&&-1===O.onlineUsers.findIndex((function(e){return e.uid===n.uid})))}}),[O]);var U=function(){var e=Object($.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.get();case 2:return(t=e.sent.data()).onlineUsers=t.onlineUsers.filter((function(e){return e.uid!==b.uid})),e.next=6,C.update(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object($.a)(Z.a.mark((function e(){var t,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.get();case 2:if(t=e.sent.data()){e.next=5;break}return e.abrupt("return");case 5:return n={uid:b.uid,displayName:b.displayName,photoURL:b.photoURL},b.uid!==t.game.player1.uid&&(t.game.player2||(t.game.player2=n)),t.onlineUsers.findIndex((function(e){return e.uid===b.uid}))<0&&t.onlineUsers.push(n),e.next=10,C.update(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e){if(e&&!e.every((function(e){return e.every((function(e){return!e}))})))return e[0][0]&&e[0][0]===e[0][1]&&e[0][0]===e[0][2]?e[0][0]:e[1][0]&&e[1][0]===e[1][1]&&e[1][0]===e[1][2]?e[1][0]:e[2][0]&&e[2][0]===e[2][1]&&e[2][0]===e[2][2]?e[2][0]:e[0][0]&&e[0][0]===e[1][0]&&e[0][0]===e[2][0]?e[0][0]:e[0][1]&&e[0][1]===e[1][1]&&e[0][1]===e[2][1]?e[0][1]:e[0][2]&&e[0][2]===e[1][2]&&e[0][2]===e[2][2]?e[0][2]:e[0][0]&&e[0][0]===e[1][1]&&e[0][0]===e[2][2]?e[0][0]:e[0][2]&&e[0][2]===e[1][1]&&e[0][2]===e[2][0]?e[0][2]:e.every((function(e){return e.every((function(e){return!!e}))}))?"Tie":null},L=function(){var e=O.game,t=e.player1,n=e.player2;return v&&!w?Object(X.jsxs)("section",{className:"waiting flex column align-center",children:[Object(X.jsx)(re.a,{color:"inherit"}),Object(X.jsxs)("p",{children:["Waiting for Player 1 (",t.displayName,") to come back"]})]}):w&&!v?Object(X.jsxs)("section",{className:"waiting flex column align-center",children:[Object(X.jsx)(re.a,{color:"inherit"}),Object(X.jsxs)("p",{children:["Waiting for Player 2 ",n?"(".concat(n.displayName,") to come back"):" to join the room"]})]}):void 0};if(c||u)return Object(X.jsx)("div",{className:"loader-spinner flex column align-center justify-center",children:Object(X.jsx)(re.a,{size:"100px",color:"inherit"})});if(!O&&!c)return Object(X.jsx)("div",{className:"multiplayer flex column align-center justify-center",children:Object(X.jsxs)("div",{className:"no-room flex column align-center justify-center",children:[Object(X.jsx)("h2",{children:"Oops... Something went wrong"}),Object(X.jsx)("p",{children:"Probably an address typo or this room doesn't exist anymore."}),Object(X.jsxs)("p",{children:["You can create a new game room from the",Object(X.jsx)("a",{href:"/rooms",children:"Rooms-page."})]})]})});if(!b&&!u)return Object(X.jsx)(ve,{});if(O&&b&&!c&&!u){var E=O.game,M=E.squares,P=E.turnUser,D=E.winner,F=E.player1,z=E.player2,q=O.messages,W=O.creator,J=O.onlineUsers;return Object(X.jsxs)("div",{className:"multiplayer flex column align-center",children:[Object(X.jsxs)("header",{className:"flex between align-center",children:[P&&Object(X.jsx)(ge,{currentPlayer:P,currentSymbol:P.uid===W.uid?"X":"O",winner:D}),Object(X.jsx)("div",{className:"middle flex column align-center justify-center",children:Object(X.jsxs)("h2",{children:[W.displayName,"'s Room"]})}),b.uid===F.uid||z&&b.uid===z.uid?Object(X.jsxs)("div",{className:"restart flex  ".concat(D&&"won"),onClick:function(){return function(){if(O.game.winner&&(b.uid===O.game.player1.uid||b.uid===O.game.player2.uid)){var e=Object(ie.a)({},O);e.game.winner=null,e.game.squares=JSON.stringify([["","",""],["","",""],["","",""]]),C.update(e)}}()},children:[Object(X.jsx)("div",{className:"text",children:Object(X.jsx)("p",{children:"Restart"})}),Object(X.jsx)("div",{className:"symbol",children:Object(X.jsx)(De.a,{})})]}):Object(X.jsx)("div",{className:"restart-dummy"})]}),Object(X.jsx)(ce,{squares:JSON.parse(M),handleClick:function(e){var t=e.i,n=e.j,r=O.game,c=r.squares,a=r.turnUser,i=r.winner,s=r.player1,o=r.player2,l=O.creator;if(!i&&""!==c[t][n]&&a.uid===b.uid&&o){var u=Object(_.a)(JSON.parse(c));u[t][n]=b.uid===l.uid?"X":"O";var j=a.uid===O.game.player1.uid?o:s,d=Object(ie.a)({},O);d.game.winner=T(u),u=JSON.stringify(u),d.game.squares=u,d.game.turnUser=j,C.update(d)}},winner:D,isUserTurn:(null===P||void 0===P?void 0:P.uid)===b.uid,winnerUser:function(){var e=O.game,t=e.winner,n=e.player1,r=e.player2;return t&&"Tie"!==t?"X"===t?n:r:null}}),(v||w)&&Object(X.jsx)(L,{}),Object(X.jsxs)("section",{className:"online-players flex align-center wrap",children:[Object(X.jsx)(Xe.a,{}),Object(X.jsx)("p",{children:"Online Right Now:"}),J.map((function(e){return Object(X.jsxs)("div",{className:"player flex justify-center align-center",children:[Object(X.jsx)("img",{src:e.photoURL,alt:e.photoURL}),Object(X.jsx)("p",{children:e.displayName[0]})]},e.uid)}))]}),Object(X.jsx)(Ee,{roomId:e}),Object(X.jsx)(Oe,{messages:q,roomId:e,user:b})]})}},ze=function(){return Object(X.jsx)("div",{className:"about flex align-center justify-center",children:"I Am About"})},qe=n(83),We=n.n(qe),Je=n(108),Be=n.n(Je),Ye=n(109),Ve=n.n(Ye),_e=n(110),Ge=n.n(_e),He=n(204),Ke=n(199),Qe=n(198),Ze=n(205),$e=r.forwardRef((function(e,t){return Object(X.jsx)(he.a,Object(ie.a)({direction:"up",ref:t},e))}));function et(e){var t=e.roomId,n=e.openDeleteModal,r=e.handleDeleteModalClose;return Object(X.jsx)("div",{children:Object(X.jsxs)(He.a,{open:n,TransitionComponent:$e,keepMounted:!0,onClose:r,"aria-describedby":"alert-dialog-slide-description",children:[Object(X.jsx)(Qe.a,{children:Object(X.jsx)(Ze.a,{id:"alert-dialog-slide-description",children:"Are your sure you want to remove this room permanently?"})}),Object(X.jsxs)(Ke.a,{children:[Object(X.jsx)(h.a,{onClick:function(){return r(!0,t)},children:"Remove"}),Object(X.jsx)(h.a,{onClick:r,children:"No"})]})]})})}var tt=function(e){var t=e.localRooms,n=(e.goToRoom,e.user),c=e.onDeleteRoom,a=Object(r.useState)(t),i=Object(l.a)(a,2),s=i[0],o=i[1];Object(r.useEffect)((function(){o(t)}),[t]);var u=Object(r.useState)(!1),j=Object(l.a)(u,2),d=j[0],b=j[1],m=function(){b(!0)},h=function(e,t){b(!1),e&&c(t)},O=function(e){var t=e.room,n=e.user,r=t.game,c=r.player1,a=r.player2,i=r.turnUser,s=i.uid===c.uid?"Your Turn":"Opponents turn";if(c.uid===n.uid)return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(We.a,{}),Object(X.jsx)("p",{children:s})]});if(!a)return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(Be.a,{}),Object(X.jsx)("p",{children:"Join"})]});var o=i.uid===a.uid?"Your Turn":"Opponents turn";return a.uid===n.uid?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(We.a,{}),Object(X.jsx)("p",{children:o})]}):Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(Ve.a,{}),Object(X.jsx)("p",{children:"Watch"})]})};return Object(X.jsxs)("section",{className:"rooms-list",children:[Object(X.jsxs)("header",{children:[Object(X.jsx)("div",{className:"creator",onClick:function(){return function(){var e=Object(_.a)(s);e.sort((function(e,t){var n=e.creator.displayName.toUpperCase(),r=t.creator.displayName.toUpperCase();return n<r?-1:n>r?1:0})),e.every((function(e,t){return e.id===s[t].id}))&&e.reverse(),o(e)}()},children:"Player"}),Object(X.jsx)("div",{className:"player2",onClick:function(){return function(){var e=Object(_.a)(s);e.sort((function(e,t){var n,r,c=null===(n=e.game.player2)||void 0===n?void 0:n.displayName.toUpperCase(),a=null===(r=t.game.player2)||void 0===r?void 0:r.displayName.toUpperCase();return c&&a?c<a?-1:c>a?1:0:-2})),e.every((function(e,t){return e.id===s[t].id}))&&e.reverse(),o(e)}()},children:"Opponent"}),Object(X.jsx)("div",{className:"time",onClick:function(){return function(){var e=Object(_.a)(s);e.sort((function(e,t){return e.createdAt.seconds-t.createdAt.seconds})),e.every((function(e,t){return e.id===s[t].id}))&&e.reverse(),o(e)}()},children:"Created"}),Object(X.jsx)("div",{children:"Enter"})]}),Object(X.jsx)("main",{children:s.map((function(e){return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("div",{className:"room-row",children:[Object(X.jsxs)("div",{className:"creator flex align-center",children:[Object(X.jsx)("img",{src:e.creator.photoURL,alt:e.creator.photoURL}),e.creator.uid===n.uid?"You":e.creator.displayName]}),Object(X.jsxs)("div",{className:"player2 flex align-center",children:[e.game.player2&&Object(X.jsx)("img",{src:e.game.player2.photoURL,alt:e.game.player2.photoURL}),e.game.player2&&e.game.player2.uid===n.uid&&"You",e.game.player2&&e.game.player2.uid!==n.uid&&e.game.player2.displayName,!e.game.player2&&"Waiting..."]}),e.createdAt&&Object(X.jsx)("div",{className:"time flex justify-center align-center",children:le()(1e3*e.createdAt.seconds).fromNow()}),n.uid===e.creator.uid?Object(X.jsx)("button",{className:"trash flex justify-center align-center",onClick:m,children:Object(X.jsx)(Ge.a,{})}):Object(X.jsx)("div",{className:"trash",children:" "}),Object(X.jsx)("a",{href:"/multiplayer/".concat(e.id),className:"join flex align-center justify-center",children:Object(X.jsx)(O,{room:e,user:n})})]},e.id),Object(X.jsx)(et,{roomId:e.id,handleDeleteModalClose:h,openDeleteModal:d})]})}))})]})},nt=n(111),rt=n.n(nt),ct=function(){var e=Object(r.useState)(!0),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!0),i=Object(l.a)(a,2),s=i[0],o=i[1],u=Object(R.a)(I),d=Object(l.a)(u,1)[0];I.onAuthStateChanged((function(e){return o(!1)}));var b=Object(r.useState)([]),m=Object(l.a)(b,2),h=m[0],O=m[1],x=A.collection("rooms/");Object(r.useEffect)((function(){x.orderBy("createdAt").onSnapshot((function(e){O(f(e.docs).reverse()),c(!1)}))}),[]);var f=function(e){var t=[];return e.forEach((function(e){var n=e.data();n.id=e.id,t.push(n)})),t},p=function(e){j.push("/multiplayer/".concat(e))};return s?Object(X.jsx)("div",{className:"loader-spinner flex column align-center justify-center",children:Object(X.jsx)(re.a,{size:"100px",color:"inherit"})}):d||s?Object(X.jsxs)("section",{className:"rooms-container home-page flex column align-center justify-center",children:[Object(X.jsx)("img",{className:"user-photo",src:d.photoURL,alt:d.photoURL}),Object(X.jsx)("h2",{className:"user-name",children:d.displayName}),Object(X.jsxs)("div",{className:"rooms flex column justify-center align-center between",children:[!n&&h.length>0&&Object(X.jsx)(tt,{user:d,goToRoom:p,localRooms:h,onDeleteRoom:function(e){x.doc(e).delete()}}),!n&&(!h||0===h.length)&&Object(X.jsxs)("div",{className:"no-rooms",children:[Object(X.jsx)("p",{children:"Looks like all the game rooms expired."}),Object(X.jsx)("p",{children:"Create a new room and invite your friends."})]}),n&&Object(X.jsx)("div",{className:"loader-spinner flex column align-center justify-center",children:Object(X.jsx)(re.a,{color:"inherit"})}),Object(X.jsxs)("button",{onClick:function(){var e={uid:d.uid,displayName:d.displayName,photoURL:d.photoURL},t={creator:e,createdAt:S.a.firestore.FieldValue.serverTimestamp(),game:{turnUser:e,player1:e,player2:null,squares:JSON.stringify([["","",""],["","",""],["","",""]]),winner:null},messages:[],onlineUsers:[]};x.add(t).then((function(e){return p(e.id)}))},children:[Object(X.jsx)(rt.a,{}),"Create New Room"]})]})]}):Object(X.jsx)(ve,{})};var at=function(){return Object(X.jsxs)("div",{className:"App main-container",children:[Object(X.jsx)(D,{}),Object(X.jsxs)(o.c,{children:[Object(X.jsx)(o.a,{component:V,exact:!0,path:"/"}),Object(X.jsx)(o.a,{component:ze,exact:!0,path:"/about"}),Object(X.jsx)(o.a,{component:ae,exact:!0,path:"/ai"}),Object(X.jsx)(o.a,{component:ct,exact:!0,path:"/rooms"}),Object(X.jsx)(o.a,{component:Fe,exact:!0,path:"/multiplayer/:roomId?"})]}),Object(X.jsx)(Y,{})]})};i.a.render(Object(X.jsx)(c.a.StrictMode,{children:Object(X.jsx)(s.a,{basename:"/xo",history:j,children:Object(X.jsx)(at,{})})}),document.getElementById("root"))},99:function(e,t){e.exports={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}}}},[[146,1,2]]]);
//# sourceMappingURL=main.3789a56c.chunk.js.map